<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kh.redclip.member.model.dao.MemberMapper">

   <select id="checkId" parameterType="string" resultType="_int">
	    SELECT 
	    		COUNT(*)
	    FROM 
	    		TB_MEMBER
	    WHERE 
	    		USER_ID = #{userId}
	</select>
	
	<select id="checkNick" parameterType="string" resultType="_int">
	  SELECT 
	    		COUNT(*)
	    FROM 
	    		TB_MEMBER
	    WHERE 
	    		NICKNAME = #{userNick}
	
	
	</select>
	
	<select id="login" parameterType="member" resultType="member">
		SELECT
			  USER_ID userId,
			  USER_PWD userPwd,
			  USER_NAME userName,
			  NICKNAME nickname,
			  EMAIL email,
			  TEL tel,
			  ADDRESS address,
			  POSTCODE postCode,
			  POINT point,
			  STATUS status,
			  CREATE_DATE createDate,
			  VILLAGE_CODE villageCode
   		  FROM
			  TB_MEMBER
		 WHERE
			  USER_ID = #{userId}
		   AND
			  STATUS ='Y'
		<!-- AND USER_PWD = #{userPwd} AND STATUS = 'Y' -->
	</select>
	
	<!-- 회원 정보 수정 -->
	<update id="update" parameterType="member">
		UPDATE
			  TB_MEMBER
		   SET
		   	   USER_NAME = #{userName},
		   	   NICKNAME = #{nickname},
		   	   EMAIL = #{email},
		   	   TEL = #{tel},
		   	   POSTCODE = #{postCode},
		   	   ADDRESS = #{address},
		   	   VILLAGE_CODE = #{villageCode}
	  	 WHERE
	  	  	   USER_ID = #{userId}
	  	   AND
	  	  	   STATUS = 'Y' 	  
	</update>
	
	<select id="selectgu" parameterType="int" resultType="region">
        SELECT 
        DISTINCT 
        TOWN_CODE townCode, 
        TOWN_NAME townName
        FROM VW_REGION
        WHERE 
        CITY_CODE = #{cityCode}
    </select>
	
	<select id="selectdong" parameterType="int" resultType="region">
        SELECT 
        DISTINCT 
        CITY_CODE cityCode,
        CITY_NAME cityName,
        TOWN_CODE townCode, 
        TOWN_NAME townName,
        VILLAGE_CODE villageCode,
        VILLAGE_NAME villageName
        
        FROM VW_REGION
        WHERE 
        TOWN_CODE = #{townCode}
    </select>
	
	
</mapper>